# =============================================================================
# Application Secrets for myapi
# =============================================================================
# This secret contains sensitive configuration for the Node.js API
# including database credentials and other sensitive environment variables.
#
# SECURITY WARNING:
# - Never commit this file with real credentials to version control
# - Use a secrets management tool (Vault, AWS Secrets Manager, etc.) in production
# - All values must be base64 encoded
# =============================================================================
#
# How to encode values:
# =====================
# Linux/macOS:
#   echo -n 'your-value' | base64
#
# Windows PowerShell:
#   [Convert]::ToBase64String([Text.Encoding]::UTF8.GetBytes('your-value'))
#
# Example:
#   echo -n 'postgresql://user:pass@host:5432/db' | base64
#   Result: cG9zdGdyZXNxbDovL3VzZXI6cGFzc0Bob3N0OjU0MzIvZGI=
#
# =============================================================================

apiVersion: v1
kind: Secret
metadata:
  # Name must match the secretKeyRef in deployment.yaml
  name: myapi-secrets
  labels:
    app: myapi
    environment: production
# Opaque type for arbitrary key-value pairs
type: Opaque
data:
  # ==========================================================================
  # Database Connection String (REQUIRED)
  # ==========================================================================
  # Format: postgresql://username:password@host:port/database
  #
  # Replace with your base64-encoded PostgreSQL connection string
  # Example (decoded): postgresql://myuser:mypassword@postgres.default.svc:5432/mydb
  database-url: <BASE64_ENCODED_DATABASE_URL>

  # ==========================================================================
  # Optional: Additional secrets can be added here
  # ==========================================================================
  # Uncomment and configure as needed:
  #
  # Redis connection string (if using Redis for rate limiting)
  # redis-url: <BASE64_ENCODED_REDIS_URL>
  #
  # JWT secret key
  # jwt-secret: <BASE64_ENCODED_JWT_SECRET>
  #
  # API keys for external services
  # api-key: <BASE64_ENCODED_API_KEY>
# =============================================================================
# USAGE INSTRUCTIONS
# =============================================================================
#
# 1. Generate base64-encoded values for your secrets
# 2. Replace the placeholder values above
# 3. Apply the secret:
#    kubectl apply -f app-secrets.yaml
#
# 4. Verify the secret was created:
#    kubectl get secrets myapi-secrets
#    kubectl describe secret myapi-secrets
#
# Alternative: Create secret directly with kubectl (avoids base64 encoding):
# ===========================================================================
#
#   kubectl create secret generic myapi-secrets \
#     --from-literal=database-url='postgresql://user:pass@host:5432/db'
#
# =============================================================================
